<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Payment - Binary Funding Accounts</title>

<style>
  body{font-family:Arial,system-ui;background:linear-gradient(180deg,#0d0d0d,#14320f);color:#fff;margin:0;padding:0}
  .wrap{max-width:820px;margin:28px auto;padding:18px}
  .card{background:#08101a;padding:16px;border-radius:10px;border:1px solid rgba(255,255,255,0.03); margin-bottom:14px}
  h1{color:#dfffdc}
  label{display:block;font-size:13px;color:#cfe8d0;margin-top:8px}
  .addr{background:#071826;padding:12px;border-radius:10px;margin-top:8px;display:flex;gap:10px;align-items:center}
  .addr code{font-family:monospace}
  .copy-btn{background:#00a8ff;color:#001;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700}
  .qr{display:inline-block;margin:10px}
  input[type=file]{margin-top:10px}
  .submit-btn{background:#e63946;color:#fff;border:none;padding:12px 16px;border-radius:10px;font-weight:800;cursor:pointer;margin-top:12px}
  .note{font-size:13px;color:#cfe8d0;margin-top:8px}
  .confirm{background:linear-gradient(90deg,#1a3,#2df);padding:18px;border-radius:12px;color:#002;margin-top:12px}
  .small{font-size:13px;color:#cfe8d0}
  .top-link{position:fixed;right:18px;top:18px;}
  a.top-btn{background:#00a8ff;padding:8px 12px;border-radius:8px;color:#001;font-weight:800;text-decoration:none}
</style>
</head>

<body>
<a class="top-btn top-link" href="customer.html">Back to Details</a>

<div class="wrap">
  <h1>Payment Processing</h1>

  <div class="card" id="summaryCard"></div>

  <div class="card">
    <strong>Select Network</strong>

    <div style="margin-top:8px">
      <label><input type="radio" name="network" value="TRC20" checked> USDT TRC-20</label>
      <label><input type="radio" name="network" value="BEP20"> USDT BEP-20</label>
    </div>

    <div id="addresses" style="margin-top:12px"></div>

    <div style="margin-top:12px">
      <label>Upload Payment Screenshot (required)</label>
      <input type="file" id="screenshot" accept="image/*" />
      <div id="preview" style="margin-top:10px"></div>

      <div class="note">
        After payment, upload screenshot & click Submit.  
        Also message @Qtxfundedproac on Telegram with your screenshot and details for faster verification.
      </div>

      <button class="submit-btn" onclick="submitProof()">Submit Screenshot & Confirm Payment</button>
    </div>
  </div>

  <div id="result" style="display:none"></div>

</div>

<script>

// Addresses
const TRC_ADDR = "TDh3EGsnydQwbeXr8gaB1fAASh29P7cPWF";
const BEP_ADDR = "0xa42152E4E76174c7a0662424D958cA250FdEAB29";
const TG_LINK  = "https://t.me/Qtxfundedproac";

// Params from previous page
const params = new URLSearchParams(location.search);
const plan = params.get('plan') || 'N/A';
const fee = params.get('fee') || 'N/A';
const broker = params.get('broker') || 'N/A';
const email = params.get('email') || '';
const mobile = params.get('mobile') || '';
const state = params.get('state') || '';

document.getElementById("summaryCard").innerHTML = `
  <div><strong>Selected Plan:</strong> ${plan} ($${fee.replace('$','')})</div>
  <div style="margin-top:6px"><strong>Broker:</strong> ${broker}</div>
  <div style="margin-top:6px"><strong>Customer Email:</strong> ${email}</div>
  <div style="margin-top:6px"><strong>Mobile:</strong> ${mobile}</div>
  <div style="margin-top:6px"><strong>State:</strong> ${state}</div>
`;

// Display Address + QR
function renderAddresses(network){
  const box = document.getElementById("addresses");

  if(network === "TRC20"){
    box.innerHTML = `
      <div class="addr">
        <code>${TRC_ADDR}</code>
        <button class="copy-btn" onclick="copy('${TRC_ADDR}')">Copy</button>
      </div>

      <div class="qr">
        <img src="https://chart.googleapis.com/chart?chs=260x260&cht=qr&chl=${encodeURIComponent(TRC_ADDR)}"
             width="200" style="border-radius:8px" />
      </div>
    `;
  }

  else {
    box.innerHTML = `
      <div class="addr">
        <code>${BEP_ADDR}</code>
        <button class="copy-btn" onclick="copy('${BEP_ADDR}')">Copy</button>
      </div>

      <div class="qr">
        <img src="https://chart.googleapis.com/chart?chs=260x260&cht=qr&chl=${encodeURIComponent(BEP_ADDR)}"
             width="200" style="border-radius:8px" />
      </div>
    `;
  }
}

// Init
document.querySelectorAll("input[name='network']").forEach(r=>{
  r.addEventListener("change", ()=>{
    renderAddresses(document.querySelector("input[name='network']:checked").value);
  });
});

renderAddresses("TRC20");

// Copy address
function copy(text){
  navigator.clipboard.writeText(text);
  alert("Address copied!");
}

// Screenshot preview
document.getElementById("screenshot").addEventListener("change", function(){
  const f = this.files[0];
  const prev = document.getElementById("preview");

  prev.innerHTML = "";
  if(!f) return;

  const img = document.createElement("img");
  img.src = URL.createObjectURL(f);
  img.style.maxWidth = "260px";
  img.style.borderRadius = "8px";
  img.style.boxShadow = "0 10px 30px rgba(0,0,0,0.6)";

  prev.appendChild(img);
});

// Submit Payment
function submitProof(){

  const file = document.getElementById("screenshot");
  if(!file.files.length){
    alert("Please upload payment screenshot.");
    return;
  }

  const network = document.querySelector("input[name='network']:checked").value;

  document.getElementById("result").style.display = "block";
  document.getElementById("result").innerHTML = `
    <div class="confirm">
      <h3>Payment Submitted</h3>
      <p class="small">Your payment screenshot has been received. Our support team will verify it shortly.</p>
      <p class="small" style="margin-top:8px">your Account details will be emailed to you within next 24 hours thank you: <strong>${email}</strong>.</p>
      <p class="small" style="margin-top:10px">
        Need help?  
        <a href="${TG_LINK}" target="_blank" style="color:#001;background:#00a8ff;padding:6px 10px;border-radius:8px;text-decoration:none">Contact Telegram</a>
      </p>
    </div>
  `;
}

</script>

</body>
</html>
